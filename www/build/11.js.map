{"version":3,"sources":["../../src/pages/home-cliente/home-cliente.module.ts","../../src/pages/home-cliente/home-cliente.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { HomeClientePage } from './home-cliente';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    HomeClientePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(HomeClientePage),\r\n  ],\r\n})\r\nexport class HomeClientePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home-cliente/home-cliente.module.ts","import { parseDate } from 'ionic-angular/util/datetime-util';\r\nimport { Evento } from '../../app/models/evento';\r\nimport { Component, NgZone } from '@angular/core';\r\nimport { AlertController, IonicPage, MenuController, NavController, NavParams } from 'ionic-angular';\r\nimport { AngularFireDatabase, FirebaseListObservable } from 'angularfire2/database'\r\nimport { Factura } from '../../app/models/factura';\r\nimport { Camera, CameraOptions } from '@ionic-native/camera'\r\nimport firebase from 'firebase';\r\n\r\n\r\n\r\n\r\n/**\r\n * Generated class for the HomeClientePage page.\r\n *\r\n * See http://ionicframework.com/docs/components/#navigation for more info\r\n * on Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-home-cliente',\r\n  templateUrl: 'home-cliente.html',\r\n})\r\nexport class HomeClientePage {\r\n  nombreEvento: any;\r\n  imagenes: any[];\r\n  eventos: any[];\r\n\r\n  firestore = firebase.database().ref('/pushtokens');\r\n  firemsg = firebase.database().ref('/messages');\r\n  evento = {} as Evento;\r\n  eventos$: FirebaseListObservable<Evento[]>;\r\n  fileT:any[];\r\n  file:any[];\r\n  preview:any;\r\n  public uid;\r\n  public nombre;\r\n  public email;\r\n  public puntos;\r\n\r\n  options1: CameraOptions = {\r\n    quality: 25,\r\n    destinationType: this.camera.DestinationType.DATA_URL,\r\n    encodingType: this.camera.EncodingType.JPEG,\r\n    mediaType: this.camera.MediaType.PICTURE,\r\n    sourceType: 1\r\n  }\r\n  options2: CameraOptions = {\r\n    quality: 25,\r\n    destinationType: this.camera.DestinationType.DATA_URL,\r\n    encodingType: this.camera.EncodingType.JPEG,\r\n    mediaType: this.camera.MediaType.PICTURE,\r\n    sourceType: 0\r\n  }\r\n  alertCtrl: AlertController;\r\n  public photos : any;\r\n  public base64Image : string;\r\n  factura = {} as Factura;\r\n  infoFactura$: FirebaseListObservable<Factura[]>\r\n\r\n  constructor(private camera: Camera, \r\n    public navCtrl: NavController, \r\n    public navParams: NavParams,\r\n    private database: AngularFireDatabase, \r\n    alertCtrl: AlertController,\r\n    public menu: MenuController,\r\n    public zone: NgZone\r\n\r\n  )\r\n     {\r\n    this.menu1Active();\r\n    this.infoFactura$ = this.database.list('factura');\r\n    this.alertCtrl = alertCtrl;\r\n    this.uid = navParams.get(\"uid\");\r\n    this.eventos$ = this.database.list('eventos');\r\n    this.eventos = [];\r\n    this.nombreEvento=[];\r\n    this.database.list('eventos').subscribe(data => {\r\n      this.eventos = data;\r\n      this.eventos.sort((a,b)=>{\r\n        a=new Date(a.fecha);\r\n        b=new Date (b.fecha);\r\n        return (a<b ? -1 : a>b ? 1 : 0);\r\n      })\r\n\r\n      this.imagenes = Array(this.eventos.length);\r\n      for (var index = 0; index <= 2; index++) {\r\n        this.nombreEvento[index]=this.eventos[index].nombre;      \r\n        this.imagenes[index] = `img/eventos/`+this.eventos[index].nombre+`/`+this.eventos[index].url;\r\n        this.generarFotos(index);\r\n\r\n      }\r\n    })\r\n    \r\n  }\r\n\r\n  generarFotos(index){\r\n    \r\n      let storageRef = firebase.storage().ref();\r\n      let imageRef = storageRef.child(this.imagenes[index]);\r\n      imageRef.getDownloadURL().then(url =>{\r\n        this.imagenes[index] = url;\r\n        this.eventos[index].imagen = url;\r\n      });\r\n        \r\n  \r\n  }\r\n  menu1Active() {\r\n    this.menu.enable(true, 'menu1');\r\n    this.menu.enable(false, 'menu2');\r\n  }\r\n   async tomarFoto(): Promise<any>{\r\n    \r\n      try{\r\n        \r\n        this.camera.getPicture(this.options1).then((ImageData) => {\r\n          this.base64Image = 'data:image/jpeg;base64,' + ImageData;\r\n          this.navCtrl.setRoot('SubirFacturaPage',{\r\n            base64Image: this.base64Image,\r\n            uid: this.uid\r\n          });\r\n        }, (err) => {\r\n        });\r\n      }\r\n      catch(e){\r\n      }\r\n  }\r\n\r\n\r\n\r\n  async sacarFoto(): Promise<any>{\r\n    try{\r\n\r\n  \r\n      this.camera.getPicture(this.options2).then((ImageData) => {\r\n        this.base64Image = 'data:image/jpeg;base64,' + ImageData;\r\n        this.navCtrl.setRoot('SubirFacturaPage',{\r\n          base64Image: this.base64Image,\r\n          uid: this.uid\r\n        });\r\n      }, (err) => {\r\n        \r\n      });\r\n\r\n    }\r\n    catch(e){\r\n\r\n    }\r\n}\r\n\r\n\r\n  upload() {\r\n    this.navCtrl.push('SubirFacturaPage',{\r\n      base64Image: this.base64Image,\r\n      uid: this.uid,\r\n      nombre: this.nombre\r\n    });\r\n\r\n  }\r\n\r\n\r\n \r\n  ionViewDidLoad() {\r\n    this.uid = this.navParams.get(\"uid\");\r\n    this.nombre =this.navParams.get(\"nombre\");\r\n    this.email =this.navParams.get(\"email\");\r\n    this.puntos =this.navParams.get(\"puntos\");\r\n \r\n    \r\n  }\r\n\r\n  ir(){\r\n    \r\n    this.navCtrl.setRoot('SubirFacturaPage');\r\n  }\r\n  \r\n\r\n  seleccionar(e){\r\n    this.fileT = e.target.files[0];\r\n    this.readPhoto(this.fileT);\r\n  \r\n  }\r\n\r\n  readPhoto(file) {\r\n\r\n   let reader = new FileReader();\r\n   reader.onload = (e)=>{\r\n     this.zone.run(()=>{\r\n       let path:any = e.target;\r\n       this.base64Image= path.result;\r\n       this.navCtrl.setRoot('SubirFacturaPage',{\r\n        base64Image :  this.base64Image,\r\n       uid: this.uid\r\n     });\r\n     });\r\n     \r\n   }\r\n    reader.readAsDataURL(file);\r\n   \r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home-cliente/home-cliente.ts"],"sourceRoot":""}